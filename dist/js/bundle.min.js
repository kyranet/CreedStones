!function(e){var t={};function a(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(s,r,function(t){return e[t]}.bind(null,r));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=4)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.up=0]="up",e[e.down=1]="down",e[e.right=2]="right",e[e.left=3]="left"}(t.Direction||(t.Direction={})),function(e){e[e.stop=0]="stop",e[e.move=1]="move"}(t.BoulderState||(t.BoulderState={})),function(e){e[e.none=0]="none",e[e.bushes=1]="bushes",e[e.cave=2]="cave",e[e.haystack=3]="haystack"}(t.HidingType||(t.HidingType={})),t.CharacterState={dead:0,run:1,stand:2,walk:3},t.PlayerState=Object.assign({},t.CharacterState,{hidden:4}),t.EnemyState=Object.assign({},t.CharacterState,{onRoute:4,pursuit:5})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(13);class r{constructor(e,t){this.game=e,this.name=t,this.type="item"}setName(e){return this.name=e,this}setType(e){return this.type=e,this}load(e){return this.setName(e.name).setType(e.type)}toJSON(){return{name:this.name,type:this.constructor.name}}}r.factory=new s.ItemFactory,t.Item=r,r.factory.add(r)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Factory=class extends Map{add(e){return this.set(e.name,e),this}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(15);class r extends Phaser.Sprite{constructor(e,t,a,s,r){super(e.game,t,a,s,r),this.gameManager=e,this.game.add.existing(this),this.gameManager.gameObjects.push(this)}setPosition(e,t){return this.body.x=e,this.body.y=t,this}setVelocity(e,t){return this.body.velocity.x=e,this.body.velocity.y=t,this}interact(e){return e.interaction(this),this}interaction(e){if(!(e instanceof r))throw new TypeError("Expected gameObject to be a GameObject instance")}toJSON(){return{frame:this.frame,key:this.key,name:this.name,position:{x:this.position.x,y:this.position.y},type:this.constructor.name,velocity:{x:this.body.velocity.x,y:this.body.velocity.y}}}fromJSON(e){return this.frame=e.frame,this.key=e.key,this.name=e.name,this.setPosition(e.position.x,e.position.y).setVelocity(e.velocity.x,e.velocity.y)}}r.factory=new s.GameObjectFactory,t.GameObject=r,r.factory.add(r)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5),r=a(6),n=a(7),i=a(16);window.onload=function(){const e=new Phaser.Game(800,600,Phaser.AUTO,"game");e.state.add("boot",s.BootState),e.state.add("preloader",i.PreloaderState),e.state.add("play",n.PlayState),e.state.add("menu",r.MenuState),e.state.start("boot")}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BootState=class extends Phaser.State{preload(){this.game.load.image("preloader_bar","images/preloader_bar.png")}create(){this.game.state.start("preloader")}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MenuState=class extends Phaser.State{constructor(){super(...arguments),this.texts=[],this.logo=null}create(){this.game.stage.backgroundColor="#2A1B19",this.logo=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY-120,"logo"),this.logo.anchor.setTo(.5,.5),this.logo.scale.setTo(.5,.5),console.log(this.game.state.states),this.createButton("New Game",()=>this.game.state.start("play")),localStorage.getItem("level")&&this.createButton("Continue",()=>this.game.state.states.play.gameManager.storageManager.load())}createButton(e,t){const a=this.game.add.text(this.game.world.centerX,this.game.world.centerY,e,{font:"65px Arial",fill:"#CDCDCD",align:"center"});a.anchor.set(.5),a.inputEnabled=!0,a.events.onInputUp.add(t,this),a.events.onInputDown.add(()=>{a.fill="#FF0044",a.events.onInputOver.removeAll(),a.events.onInputOut.removeAll()}),a.events.onInputOver.add(()=>{a.fill="#FFFFFF"}),a.events.onInputOut.add(()=>{a.fill="#EFEFEF"}),this.texts.push(a),a.alignTo(this.texts.length?this.texts[this.texts.length-1]:this.logo,Phaser.BOTTOM_CENTER,16)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(8);t.PlayState=class extends Phaser.State{constructor(){super(...arguments),this.gameManager=new s.GameManager(this.game)}preload(){try{this.gameManager.storageManager.load(),console.log("Loaded previous game from storage.")}catch(e){console.log("Loading new game.")}}create(){this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"logo").anchor.setTo(.5,.5)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(9);var r;t.GameManager=class{constructor(e){this.game=e,this.mapManager=null,this.storageManager=new s.StorageManager(this),this.gameObjects=[],this.player=null,this.level=r.First}clear(){for(const e of this.gameObjects)e.destroy(!0);return this.gameObjects.length=0,this}},function(e){e[e.First=0]="First"}(r=t.GameLevels||(t.GameLevels={}))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(10),r=a(3);t.StorageManager=class{constructor(e){this.gameManager=e}save(){localStorage.clear(),localStorage.setItem("gameObjects",JSON.stringify(this.gameManager.gameObjects)),localStorage.setItem("level",this.gameManager.level.toString())}load(){this.gameManager.clear();const e=localStorage.getItem("level");if(null===e)throw new Error("Could not find a saved file.");const t=Number(e);this.gameManager.level=t;const a=JSON.parse(localStorage.getItem("gameObjects"));if(a){for(const e of a){const t=r.GameObject.factory.get(e.type);throw t&&new t(this.gameManager,0,0).fromJSON(e),new Error(`Could not find a constructor for ${e.type||"unknown"}. Aborting.`)}this.gameManager.player=this.gameManager.gameObjects.find(e=>e instanceof s.Player)}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(0),r=a(11);class n extends r.Character{constructor(e,t,a){super(e,t,a,"player"),this.hidingSpot=null,this.money=0}hide(e){return e.hidingType!==s.HidingType.none&&(this.setState(s.PlayerState.hidden),this.hidingSpot=e),this}reveal(){return this.hidingSpot&&(this.setState(this.health?s.PlayerState.stand:s.PlayerState.dead),this.hidingSpot=null),this}fromJSON(e){return super.fromJSON(e),this}toJSON(){return Object.assign({},super.toJSON(),{hidingSpot:this.hidingSpot.toJSON(),money:this.money})}}t.Player=n,n.factory.add(n)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(12),r=a(1),n=a(14),i=a(0),o=a(3);class c extends o.GameObject{constructor(e,t,a,r,n){super(e,t,a,r,n),this.walkSpeed=0,this.runSpeed=0,this.state=i.CharacterState.stand,this.direction=i.Direction.down,this.inventary=new s.Inventory,this.strength=0,this.game.physics.enable(this)}get damageStrength(){const e=this.inventary.active;return e instanceof n.ItemWeapon?e.damage:this.strength}setStrength(e){return this.strength=e,this}setState(e){return this.state=e,this}attack(e){e.damage(this.damageStrength)}kill(){return this.setState(i.CharacterState.dead),super.kill()}walk(){switch(this.setState(i.CharacterState.walk),this.direction){case i.Direction.down:this.setVelocity(0,this.walkSpeed);break;case i.Direction.up:this.setVelocity(0,-this.walkSpeed);break;case i.Direction.left:this.setVelocity(-this.walkSpeed,0);break;default:this.setVelocity(this.walkSpeed,0)}}run(){switch(this.setState(i.CharacterState.run),this.direction){case i.Direction.down:this.setVelocity(0,this.runSpeed);break;case i.Direction.up:this.setVelocity(0,-this.runSpeed);break;case i.Direction.left:this.setVelocity(-this.runSpeed,0);break;default:this.setVelocity(this.runSpeed,0)}}stand(){this.setState(i.CharacterState.stand),this.setVelocity(0,0)}changeDirection(e){this.direction=e}fromJSON(e){super.fromJSON(e),this.direction=e.direction,this.runSpeed=e.runSpeed,this.walkSpeed=e.walkSpeed,this.inventary.clear(),this.inventary.active=new r.Item(this.game,e.inventary.active);for(const t of e.inventary.items)this.inventary.set(t.name,new r.Item(this.game,t.name));return this.setStrength(e.strength),this}toJSON(){return Object.assign({},super.toJSON(),{direction:this.direction,inventary:this.inventary.toJSON(),runSpeed:this.runSpeed,strength:this.strength,walkSpeed:this.walkSpeed})}}t.Character=c,c.factory.add(c)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Inventory=class extends Map{setActive(e){return this.active=e,this}toJSON(){return{active:this.active.name,items:[...this.values()]}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(2);t.ItemFactory=class extends s.Factory{}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(1);class r extends s.Item{constructor(){super(...arguments),this.damage=0}setDamage(e){return this.damage=e,this}load(e){return super.load(e).setDamage(e.damage)}toJSON(){return Object.assign({},super.toJSON(),{damage:this.damage})}}t.ItemWeapon=r,s.Item.factory.add(r)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(2);t.GameObjectFactory=class extends s.Factory{}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PreloaderState=class extends Phaser.State{preload(){this.loadingBar=this.game.add.sprite(0,240,"preloader_bar"),this.loadingBar.anchor.setTo(0,.5),this.load.setPreloadSprite(this.loadingBar),this.game.load.image("logo","images/StonesCreed.png")}create(){this.game.state.start("menu")}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9zdHJ1Y3R1cmVzL21pc2MvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9zdHJ1Y3R1cmVzL2l0ZW1zL0l0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9zdHJ1Y3R1cmVzL2NvbW1vbi9GYWN0b3J5LnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvc3RydWN0dXJlcy9nYW1lT2JqZWN0cy9HYW1lT2JqZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3N0YXRlcy9Cb290U3RhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9zdGF0ZXMvTWVudVN0YXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvc3RhdGVzL1BsYXlTdGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3N0cnVjdHVyZXMvbWFuYWdlcnMvR2FtZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9zdHJ1Y3R1cmVzL21hbmFnZXJzL1N0b3JhZ2VNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvc3RydWN0dXJlcy9nYW1lT2JqZWN0cy9jaGFyYWN0ZXJzL1BsYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3N0cnVjdHVyZXMvZ2FtZU9iamVjdHMvY2hhcmFjdGVycy9DaGFyYWN0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9zdHJ1Y3R1cmVzL2NvbW1vbi9JbnZlbnRvcnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9zdHJ1Y3R1cmVzL2l0ZW1zL0l0ZW1GYWN0b3J5LnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvc3RydWN0dXJlcy9pdGVtcy9JdGVtV2VhcG9uLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvc3RydWN0dXJlcy9nYW1lT2JqZWN0cy9HYW1lT2JqZWN0RmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3N0YXRlcy9QcmVsb2FkZXJTdGF0ZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkRpcmVjdGlvbiIsIkJvdWxkZXJTdGF0ZSIsIkhpZGluZ1R5cGUiLCJDaGFyYWN0ZXJTdGF0ZSIsImRlYWQiLCJydW4iLCJzdGFuZCIsIndhbGsiLCJQbGF5ZXJTdGF0ZSIsImFzc2lnbiIsImhpZGRlbiIsIkVuZW15U3RhdGUiLCJvblJvdXRlIiwicHVyc3VpdCIsIkl0ZW1GYWN0b3J5XzEiLCJJdGVtIiwiW29iamVjdCBPYmplY3RdIiwiZ2FtZSIsInRoaXMiLCJ0eXBlIiwiZGF0YSIsInNldE5hbWUiLCJzZXRUeXBlIiwiY29uc3RydWN0b3IiLCJmYWN0b3J5IiwiSXRlbUZhY3RvcnkiLCJhZGQiLCJGYWN0b3J5IiwiTWFwIiwiY3RvciIsInNldCIsIkdhbWVPYmplY3RGYWN0b3J5XzEiLCJHYW1lT2JqZWN0IiwiUGhhc2VyIiwiU3ByaXRlIiwiZ2FtZU1hbmFnZXIiLCJ4IiwieSIsImZyYW1lIiwic3VwZXIiLCJleGlzdGluZyIsImdhbWVPYmplY3RzIiwicHVzaCIsImJvZHkiLCJ2ZWxvY2l0eSIsImdhbWVPYmplY3QiLCJpbnRlcmFjdGlvbiIsIlR5cGVFcnJvciIsInBvc2l0aW9uIiwic2V0UG9zaXRpb24iLCJzZXRWZWxvY2l0eSIsIkdhbWVPYmplY3RGYWN0b3J5IiwiQm9vdFN0YXRlXzEiLCJNZW51U3RhdGVfMSIsIlBsYXlTdGF0ZV8xIiwiUHJlbG9hZGVyU3RhdGVfMSIsIndpbmRvdyIsIm9ubG9hZCIsIkdhbWUiLCJBVVRPIiwic3RhdGUiLCJCb290U3RhdGUiLCJQcmVsb2FkZXJTdGF0ZSIsIlBsYXlTdGF0ZSIsIk1lbnVTdGF0ZSIsInN0YXJ0IiwiU3RhdGUiLCJsb2FkIiwiaW1hZ2UiLCJ0ZXh0cyIsImxvZ28iLCJzdGFnZSIsImJhY2tncm91bmRDb2xvciIsInNwcml0ZSIsIndvcmxkIiwiY2VudGVyWCIsImNlbnRlclkiLCJhbmNob3IiLCJzZXRUbyIsInNjYWxlIiwiY29uc29sZSIsImxvZyIsInN0YXRlcyIsImNyZWF0ZUJ1dHRvbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwbGF5Iiwic3RvcmFnZU1hbmFnZXIiLCJjYiIsInRleHQiLCJmb250IiwiZmlsbCIsImFsaWduIiwiaW5wdXRFbmFibGVkIiwiZXZlbnRzIiwib25JbnB1dFVwIiwib25JbnB1dERvd24iLCJvbklucHV0T3ZlciIsInJlbW92ZUFsbCIsIm9uSW5wdXRPdXQiLCJhbGlnblRvIiwibGVuZ3RoIiwiQk9UVE9NX0NFTlRFUiIsIkdhbWVNYW5hZ2VyXzEiLCJHYW1lTWFuYWdlciIsIl9hIiwiU3RvcmFnZU1hbmFnZXJfMSIsIkdhbWVMZXZlbHMiLCJtYXBNYW5hZ2VyIiwiU3RvcmFnZU1hbmFnZXIiLCJwbGF5ZXIiLCJsZXZlbCIsIkZpcnN0IiwiZGVzdHJveSIsIlBsYXllcl8xIiwiR2FtZU9iamVjdF8xIiwiY2xlYXIiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInRvU3RyaW5nIiwicmF3TGV2ZWwiLCJFcnJvciIsIk51bWJlciIsInBhcnNlIiwiQ3RvciIsImZyb21KU09OIiwiZmluZCIsIlBsYXllciIsInR5cGVzXzEiLCJDaGFyYWN0ZXJfMSIsIkNoYXJhY3RlciIsImhpZGluZ1Nwb3QiLCJtb25leSIsImhpZGluZ1R5cGUiLCJub25lIiwic2V0U3RhdGUiLCJoZWFsdGgiLCJ0b0pTT04iLCJJbnZlbnRvcnlfMSIsIkl0ZW1fMSIsIkl0ZW1XZWFwb25fMSIsIndhbGtTcGVlZCIsInJ1blNwZWVkIiwiZGlyZWN0aW9uIiwiZG93biIsImludmVudGFyeSIsIkludmVudG9yeSIsInN0cmVuZ3RoIiwicGh5c2ljcyIsImVuYWJsZSIsImRhbWFnZVN0cmVuZ3RoIiwiaXRlbSIsImFjdGl2ZSIsIkl0ZW1XZWFwb24iLCJkYW1hZ2UiLCJjaGFyYWN0ZXIiLCJraWxsIiwidXAiLCJsZWZ0IiwiZW50cnkiLCJpdGVtcyIsInNldFN0cmVuZ3RoIiwidmFsdWVzIiwiRmFjdG9yeV8xIiwic2V0RGFtYWdlIiwibG9hZGluZ0JhciIsInNldFByZWxvYWRTcHJpdGUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNB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QjBMLE1BQU8sSUFBSS9JLEtBQUtpSiw0RkNsQm5CLE1BQUFDLEVBQUF4TSxFQUFBLEdBR0FFLEVBQUEyRCxZQUFBLGNBQWlDMkksRUFBQXpJLHlGQ0hqQyxNQUFBaUgsRUFBQWhMLEVBQUEsR0FFQSxNQUFhOEwsVUFBbUJkLEVBQUE3SCxLQUFoQ0Msa0NBQ1FFLEtBQUF5SSxPQUFTLEVBTVQzSSxVQUFVMkksR0FFaEIsT0FEQXpJLEtBQUt5SSxPQUFTQSxFQUNQekksS0FHREYsS0FBS0ksR0FDWCxPQUFPbUIsTUFBTTRCLEtBQUsvQyxHQUFNaUosVUFBVWpKLEVBQUt1SSxRQUdqQzNJLFNBQ04sT0FBQXRDLE9BQUErQixPQUFBLEdBQ0k4QixNQUFNbUcsU0FBUSxDQUNqQmlCLE9BQVF6SSxLQUFLeUksVUFuQmhCN0wsRUFBQTRMLGFBeUJBZCxFQUFBN0gsS0FBS1MsUUFBUUUsSUFBSWdJLGtGQzNCakIsTUFBQVUsRUFBQXhNLEVBQUEsR0FHQUUsRUFBQXFGLGtCQUFBLGNBQXVDaUgsRUFBQXpJLHlGQ0h2QzdELEVBQUFnRyxlQUFBLGNBQW9DN0IsT0FBT2lDLE1BSW5DbEQsVUFDTkUsS0FBS29KLFdBQWFwSixLQUFLRCxLQUFLUyxJQUFJK0MsT0FBTyxFQUFHLElBQUssaUJBQy9DdkQsS0FBS29KLFdBQVd6RixPQUFPQyxNQUFNLEVBQUcsSUFDaEM1RCxLQUFLaUQsS0FBS29HLGlCQUFpQnJKLEtBQUtvSixZQUdoQ3BKLEtBQUtELEtBQUtrRCxLQUFLQyxNQUFNLE9BQVEsMEJBR3ZCcEQsU0FDTkUsS0FBS0QsS0FBSzJDLE1BQU1LLE1BQU0iLCJmaWxlIjoiYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsIi8qKlxuICogVGhlIGRpcmVjdGlvbnNcbiAqL1xuZXhwb3J0IGVudW0gRGlyZWN0aW9uIHtcblx0dXAsXG5cdGRvd24sXG5cdHJpZ2h0LFxuXHRsZWZ0XG59XG5cbi8qKlxuICogVGhlIGJvdWxkZXIgc3RhdGVzXG4gKi9cbmV4cG9ydCBlbnVtIEJvdWxkZXJTdGF0ZSB7XG5cdHN0b3AsXG5cdG1vdmVcbn1cblxuLyoqXG4gKiBUaGUgaGlkaW5nIHR5cGVzXG4gKi9cbmV4cG9ydCBlbnVtIEhpZGluZ1R5cGUge1xuXHRub25lLFxuXHRidXNoZXMsXG5cdGNhdmUsXG5cdGhheXN0YWNrXG59XG5cbmV4cG9ydCBjb25zdCBDaGFyYWN0ZXJTdGF0ZTogSUNoYXJhY3RlclN0YXRlID0ge1xuXHRkZWFkOiAwLFxuXHRydW46IDEsXG5cdHN0YW5kOiAyLFxuXHR3YWxrOiAzXG59O1xuXG5leHBvcnQgY29uc3QgUGxheWVyU3RhdGU6IElQbGF5ZXJTdGF0ZSA9IHtcblx0Li4uQ2hhcmFjdGVyU3RhdGUsXG5cdGhpZGRlbjogNFxufTtcblxuZXhwb3J0IGNvbnN0IEVuZW15U3RhdGU6IElFbmVteVN0YXRlID0ge1xuXHQuLi5DaGFyYWN0ZXJTdGF0ZSxcblx0b25Sb3V0ZTogNCxcblx0cHVyc3VpdDogNVxufTtcblxuLyoqXG4gKiBUaGUgY2hhcmFjdGVyIHN0YXRlc1xuICovXG5pbnRlcmZhY2UgSUNoYXJhY3RlclN0YXRlIHtcblx0ZGVhZDogMDtcblx0cnVuOiAxO1xuXHRzdGFuZDogMjtcblx0d2FsazogMztcbn1cblxuLyoqXG4gKiBUaGUgcGxheWVyIHN0YXRlc1xuICovXG5pbnRlcmZhY2UgSVBsYXllclN0YXRlIGV4dGVuZHMgSUNoYXJhY3RlclN0YXRlIHtcblx0aGlkZGVuOiA0O1xufVxuXG4vKipcbiAqIFRoZSBlbmVteSBzdGF0ZXNcbiAqL1xuaW50ZXJmYWNlIElFbmVteVN0YXRlIGV4dGVuZHMgSUNoYXJhY3RlclN0YXRlIHtcblx0b25Sb3V0ZTogNDtcblx0cHVyc3VpdDogNTtcbn1cbiIsImltcG9ydCB7IEl0ZW1GYWN0b3J5IH0gZnJvbSAnLi9JdGVtRmFjdG9yeSc7XG5cbmV4cG9ydCBjbGFzcyBJdGVtIHtcblxuXHRwdWJsaWMgdHlwZSA9ICdpdGVtJztcblxuXHRwdWJsaWMgY29uc3RydWN0b3IocHVibGljIGdhbWU6IFBoYXNlci5HYW1lLCBwdWJsaWMgbmFtZTogc3RyaW5nKSB7IH1cblxuXHRwdWJsaWMgc2V0TmFtZShuYW1lOiBzdHJpbmcpIHtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0cHVibGljIHNldFR5cGUodHlwZTogc3RyaW5nKSB7XG5cdFx0dGhpcy50eXBlID0gdHlwZTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHB1YmxpYyBsb2FkKGRhdGE6IElJdGVtU2VyaWFsaXplZCkge1xuXHRcdHJldHVybiB0aGlzXG5cdFx0XHQuc2V0TmFtZShkYXRhLm5hbWUpXG5cdFx0XHQuc2V0VHlwZShkYXRhLnR5cGUpO1xuXHR9XG5cblx0cHVibGljIHRvSlNPTigpOiBJSXRlbVNlcmlhbGl6ZWQge1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiB0aGlzLm5hbWUsXG5cdFx0XHR0eXBlOiB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcblx0XHR9O1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBmYWN0b3J5ID0gbmV3IEl0ZW1GYWN0b3J5KCk7XG5cbn1cblxuSXRlbS5mYWN0b3J5LmFkZChJdGVtKTtcblxuLyoqXG4gKiBUaGUgc2VyaWFsaXplZCBpdGVtIGRhdGFcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJSXRlbVNlcmlhbGl6ZWQge1xuXHRuYW1lOiBzdHJpbmc7XG5cdHR5cGU6IHN0cmluZztcbn1cbiIsImV4cG9ydCBjbGFzcyBGYWN0b3J5PFYsIEMgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBWPiBleHRlbmRzIE1hcDxzdHJpbmcsIEM+IHtcblxuXHRwdWJsaWMgYWRkKGN0b3I6IEMpIHtcblx0XHR0aGlzLnNldChjdG9yLm5hbWUsIGN0b3IpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cbn1cbiIsImltcG9ydCB7IEdhbWVNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvR2FtZU1hbmFnZXInO1xuaW1wb3J0IHsgR2FtZU9iamVjdEZhY3RvcnkgfSBmcm9tICcuL0dhbWVPYmplY3RGYWN0b3J5JztcblxuZXhwb3J0IGNsYXNzIEdhbWVPYmplY3QgZXh0ZW5kcyBQaGFzZXIuU3ByaXRlIHtcblxuXHRwdWJsaWMgY29uc3RydWN0b3IocHVibGljIGdhbWVNYW5hZ2VyOiBHYW1lTWFuYWdlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGtleT86IHN0cmluZywgZnJhbWU/OiBzdHJpbmcpIHtcblx0XHRzdXBlcihnYW1lTWFuYWdlci5nYW1lLCB4LCB5LCBrZXksIGZyYW1lKTtcblx0XHQvLyBBZGQgdGhlIGdhbWVvYmplY3QgaXRzZWxmIHRvIHRoZSBnYW1lXG5cdFx0dGhpcy5nYW1lLmFkZC5leGlzdGluZyh0aGlzKTtcblx0XHR0aGlzLmdhbWVNYW5hZ2VyLmdhbWVPYmplY3RzLnB1c2godGhpcyk7XG5cdH1cblxuXHQvKipcblx0ICogU2V0IHRoZSBwb3NpdGlvbiBmb3IgdGhpcyBnYW1lIG9iamVjdFxuXHQgKiBAcGFyYW0geCBUaGUgbmV3IHggcG9zaXRpb25cblx0ICogQHBhcmFtIHkgVGhlIG5ldyB5IHBvc2l0aW9uXG5cdCAqL1xuXHRwdWJsaWMgc2V0UG9zaXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcblx0XHR0aGlzLmJvZHkueCA9IHg7XG5cdFx0dGhpcy5ib2R5LnkgPSB5O1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB0aGUgdmVsb2NpdHkgZm9yIHRoaXMgZ2FtZSBvYmplY3Rcblx0ICogQHBhcmFtIHggVGhlIG5ldyB4IHZlbG9jaXR5XG5cdCAqIEBwYXJhbSB5IFRoZSBuZXcgeSB2ZWxvY2l0eVxuXHQgKi9cblx0cHVibGljIHNldFZlbG9jaXR5KHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG5cdFx0dGhpcy5ib2R5LnZlbG9jaXR5LnggPSB4O1xuXHRcdHRoaXMuYm9keS52ZWxvY2l0eS55ID0geTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBJbnRlcmFjdHMgd2l0aCBhIGdhbWUgb2JqZWN0IGZyb20gdGhlIGdhbWVcblx0ICogQHBhcmFtIGdhbWVPYmplY3QgVGhlIGdhbWUgb2JqZWN0IHRvIGludGVyYWN0IHdpdGhcblx0ICovXG5cdHB1YmxpYyBpbnRlcmFjdChnYW1lT2JqZWN0OiBHYW1lT2JqZWN0KSB7XG5cdFx0Z2FtZU9iamVjdC5pbnRlcmFjdGlvbih0aGlzKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgdGhlIGludGVyYWN0aW9ucyB0byB0aGlzIGdhbWUgb2JqZWN0XG5cdCAqIEBwYXJhbSBnYW1lT2JqZWN0IFRoZSBnYW1lIG9iamVjdCB0aGF0IGludGVyYWN0ZWQgd2l0aCB0aGlzIGluc3RhbmNlXG5cdCAqL1xuXHRwdWJsaWMgaW50ZXJhY3Rpb24oZ2FtZU9iamVjdDogR2FtZU9iamVjdCkge1xuXHRcdGlmICghKGdhbWVPYmplY3QgaW5zdGFuY2VvZiBHYW1lT2JqZWN0KSlcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIGdhbWVPYmplY3QgdG8gYmUgYSBHYW1lT2JqZWN0IGluc3RhbmNlYCk7XG5cdH1cblxuXHRwdWJsaWMgdG9KU09OKCk6IElHYW1lT2JqZWN0U2VyaWFsaXplZCB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGZyYW1lOiB0aGlzLmZyYW1lIGFzIHN0cmluZyxcblx0XHRcdGtleTogdGhpcy5rZXkgYXMgc3RyaW5nLFxuXHRcdFx0bmFtZTogdGhpcy5uYW1lLFxuXHRcdFx0cG9zaXRpb246IHtcblx0XHRcdFx0eDogdGhpcy5wb3NpdGlvbi54LFxuXHRcdFx0XHR5OiB0aGlzLnBvc2l0aW9uLnlcblx0XHRcdH0sXG5cdFx0XHR0eXBlOiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUsXG5cdFx0XHR2ZWxvY2l0eToge1xuXHRcdFx0XHR4OiB0aGlzLmJvZHkudmVsb2NpdHkueCxcblx0XHRcdFx0eTogdGhpcy5ib2R5LnZlbG9jaXR5Lnlcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0cHVibGljIGZyb21KU09OKGRhdGE6IElHYW1lT2JqZWN0U2VyaWFsaXplZCkge1xuXHRcdHRoaXMuZnJhbWUgPSBkYXRhLmZyYW1lO1xuXHRcdHRoaXMua2V5ID0gZGF0YS5rZXk7XG5cdFx0dGhpcy5uYW1lID0gZGF0YS5uYW1lO1xuXHRcdHJldHVybiB0aGlzXG5cdFx0XHQuc2V0UG9zaXRpb24oZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnkpXG5cdFx0XHQuc2V0VmVsb2NpdHkoZGF0YS52ZWxvY2l0eS54LCBkYXRhLnZlbG9jaXR5LnkpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBmYWN0b3J5ID0gbmV3IEdhbWVPYmplY3RGYWN0b3J5KCk7XG5cbn1cblxuR2FtZU9iamVjdC5mYWN0b3J5LmFkZChHYW1lT2JqZWN0KTtcblxuLyoqXG4gKiBUaGUgc2VyaWFsaXplZCBnYW1lIG9iamVjdCBkYXRhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUdhbWVPYmplY3RTZXJpYWxpemVkIHtcblx0ZnJhbWU6IHN0cmluZztcblx0a2V5OiBzdHJpbmc7XG5cdG5hbWU6IHN0cmluZztcblx0cG9zaXRpb246IHtcblx0XHR4OiBudW1iZXI7XG5cdFx0eTogbnVtYmVyO1xuXHR9O1xuXHR0eXBlOiBzdHJpbmc7XG5cdHZlbG9jaXR5OiB7XG5cdFx0eDogbnVtYmVyO1xuXHRcdHk6IG51bWJlcjtcblx0fTtcbn1cbiIsImltcG9ydCB7IEJvb3RTdGF0ZSB9IGZyb20gJy4vc3RhdGVzL0Jvb3RTdGF0ZSc7XG5pbXBvcnQgeyBNZW51U3RhdGUgfSBmcm9tICcuL3N0YXRlcy9NZW51U3RhdGUnO1xuaW1wb3J0IHsgUGxheVN0YXRlIH0gZnJvbSAnLi9zdGF0ZXMvUGxheVN0YXRlJztcbmltcG9ydCB7IFByZWxvYWRlclN0YXRlIH0gZnJvbSAnLi9zdGF0ZXMvUHJlbG9hZGVyU3RhdGUnO1xuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24gb25sb2FkKCkge1xuXHRjb25zdCBnYW1lID0gbmV3IFBoYXNlci5HYW1lKDgwMCwgNjAwLCBQaGFzZXIuQVVUTywgJ2dhbWUnKTtcblxuXHRnYW1lLnN0YXRlLmFkZCgnYm9vdCcsIEJvb3RTdGF0ZSk7XG5cdGdhbWUuc3RhdGUuYWRkKCdwcmVsb2FkZXInLCBQcmVsb2FkZXJTdGF0ZSk7XG5cdGdhbWUuc3RhdGUuYWRkKCdwbGF5JywgUGxheVN0YXRlKTtcblx0Z2FtZS5zdGF0ZS5hZGQoJ21lbnUnLCBNZW51U3RhdGUpO1xuXG5cdGdhbWUuc3RhdGUuc3RhcnQoJ2Jvb3QnKTtcbn07XG4iLCJcbmV4cG9ydCBjbGFzcyBCb290U3RhdGUgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuXHRwdWJsaWMgcHJlbG9hZCgpIHtcblx0XHQvLyBsb2FkIGhlcmUgYXNzZXRzIHJlcXVpcmVkIGZvciB0aGUgbG9hZGluZyBzY3JlZW5cblx0XHR0aGlzLmdhbWUubG9hZC5pbWFnZSgncHJlbG9hZGVyX2JhcicsICdpbWFnZXMvcHJlbG9hZGVyX2Jhci5wbmcnKTtcblx0fVxuXG5cdHB1YmxpYyBjcmVhdGUoKSB7XG5cdFx0dGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdwcmVsb2FkZXInKTtcblx0fVxufVxuIiwiaW1wb3J0IHsgUGxheVN0YXRlIH0gZnJvbSAnLi9QbGF5U3RhdGUnO1xuXG5leHBvcnQgY2xhc3MgTWVudVN0YXRlIGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcblxuXHRwdWJsaWMgdGV4dHM6IFBoYXNlci5UZXh0W10gPSBbXTtcblx0cHVibGljIGxvZ286IFBoYXNlci5TcHJpdGUgPSBudWxsO1xuXG5cdHB1YmxpYyBjcmVhdGUoKSB7XG5cdFx0dGhpcy5nYW1lLnN0YWdlLmJhY2tncm91bmRDb2xvciA9ICcjMkExQjE5Jztcblx0XHR0aGlzLmxvZ28gPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgdGhpcy5nYW1lLndvcmxkLmNlbnRlclkgLSAxMjAsICdsb2dvJyk7XG5cdFx0dGhpcy5sb2dvLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cdFx0dGhpcy5sb2dvLnNjYWxlLnNldFRvKDAuNSwgMC41KTtcblxuXHRcdGNvbnNvbGUubG9nKHRoaXMuZ2FtZS5zdGF0ZS5zdGF0ZXMpO1xuXHRcdHRoaXMuY3JlYXRlQnV0dG9uKCdOZXcgR2FtZScsICgpID0+IHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgncGxheScpKTtcblx0XHRpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xldmVsJykpIHRoaXMuY3JlYXRlQnV0dG9uKCdDb250aW51ZScsICgpID0+ICh0aGlzLmdhbWUuc3RhdGUuc3RhdGVzLnBsYXkgYXMgUGxheVN0YXRlKS5nYW1lTWFuYWdlci5zdG9yYWdlTWFuYWdlci5sb2FkKCkpO1xuXHR9XG5cblx0cHJpdmF0ZSBjcmVhdGVCdXR0b24obmFtZTogc3RyaW5nLCBjYjogRnVuY3Rpb24pIHtcblx0XHRjb25zdCB0ZXh0ID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmdhbWUud29ybGQuY2VudGVyWSwgbmFtZSwgeyBmb250OiAnNjVweCBBcmlhbCcsIGZpbGw6ICcjQ0RDRENEJywgYWxpZ246ICdjZW50ZXInIH0pO1xuXHRcdHRleHQuYW5jaG9yLnNldCgwLjUpO1xuXHRcdHRleHQuaW5wdXRFbmFibGVkID0gdHJ1ZTtcblx0XHR0ZXh0LmV2ZW50cy5vbklucHV0VXAuYWRkKGNiLCB0aGlzKTtcblx0XHR0ZXh0LmV2ZW50cy5vbklucHV0RG93bi5hZGQoKCkgPT4ge1xuXHRcdFx0dGV4dC5maWxsID0gJyNGRjAwNDQnO1xuXHRcdFx0dGV4dC5ldmVudHMub25JbnB1dE92ZXIucmVtb3ZlQWxsKCk7XG5cdFx0XHR0ZXh0LmV2ZW50cy5vbklucHV0T3V0LnJlbW92ZUFsbCgpO1xuXHRcdH0pO1xuXHRcdHRleHQuZXZlbnRzLm9uSW5wdXRPdmVyLmFkZCgoKSA9PiB7IHRleHQuZmlsbCA9ICcjRkZGRkZGJzsgfSk7XG5cdFx0dGV4dC5ldmVudHMub25JbnB1dE91dC5hZGQoKCkgPT4geyB0ZXh0LmZpbGwgPSAnI0VGRUZFRic7IH0pO1xuXHRcdHRoaXMudGV4dHMucHVzaCh0ZXh0KTtcblx0XHR0ZXh0LmFsaWduVG8odGhpcy50ZXh0cy5sZW5ndGggPyB0aGlzLnRleHRzW3RoaXMudGV4dHMubGVuZ3RoIC0gMV0gOiB0aGlzLmxvZ28sIFBoYXNlci5CT1RUT01fQ0VOVEVSLCAxNik7XG5cdH1cblxufVxuIiwiaW1wb3J0IHsgR2FtZU1hbmFnZXIgfSBmcm9tICcuLi9zdHJ1Y3R1cmVzL21hbmFnZXJzL0dhbWVNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIFBsYXlTdGF0ZSBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG5cdHB1YmxpYyBnYW1lTWFuYWdlciA9IG5ldyBHYW1lTWFuYWdlcih0aGlzLmdhbWUpO1xuXG5cdHB1YmxpYyBwcmVsb2FkKCkge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmdhbWVNYW5hZ2VyLnN0b3JhZ2VNYW5hZ2VyLmxvYWQoKTtcblx0XHRcdGNvbnNvbGUubG9nKCdMb2FkZWQgcHJldmlvdXMgZ2FtZSBmcm9tIHN0b3JhZ2UuJyk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRjb25zb2xlLmxvZygnTG9hZGluZyBuZXcgZ2FtZS4nKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlKCkge1xuXHRcdGNvbnN0IGxvZ28gPSB0aGlzLmdhbWUuYWRkLnNwcml0ZShcblx0XHRcdHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmdhbWUud29ybGQuY2VudGVyWSwgJ2xvZ28nKTtcblx0XHRsb2dvLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cdH1cblxufVxuIiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi4vZ2FtZU9iamVjdHMvY2hhcmFjdGVycy9QbGF5ZXInO1xuaW1wb3J0IHsgR2FtZU9iamVjdCB9IGZyb20gJy4uL2dhbWVPYmplY3RzL0dhbWVPYmplY3QnO1xuaW1wb3J0IHsgTWFwTWFuYWdlciB9IGZyb20gJy4vTWFwTWFuYWdlcic7XG5pbXBvcnQgeyBTdG9yYWdlTWFuYWdlciB9IGZyb20gJy4vU3RvcmFnZU1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgR2FtZU1hbmFnZXIge1xuXHRwdWJsaWMgbWFwTWFuYWdlcjogTWFwTWFuYWdlciA9IG51bGw7XG5cdHB1YmxpYyBzdG9yYWdlTWFuYWdlciA9IG5ldyBTdG9yYWdlTWFuYWdlcih0aGlzKTtcblx0cHVibGljIGdhbWVPYmplY3RzOiBHYW1lT2JqZWN0W10gPSBbXTtcblx0cHVibGljIHBsYXllcjogUGxheWVyID0gbnVsbDtcblx0cHVibGljIGxldmVsID0gR2FtZUxldmVscy5GaXJzdDtcblxuXHRwdWJsaWMgY29uc3RydWN0b3IocHVibGljIGdhbWU6IFBoYXNlci5HYW1lKSB7fVxuXG5cdHB1YmxpYyBjbGVhcigpIHtcblx0XHRmb3IgKGNvbnN0IGdhbWVPYmplY3Qgb2YgdGhpcy5nYW1lT2JqZWN0cykgZ2FtZU9iamVjdC5kZXN0cm95KHRydWUpO1xuXHRcdHRoaXMuZ2FtZU9iamVjdHMubGVuZ3RoID0gMDtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG59XG5cbi8qKlxuICogVGhlIGdhbWUncyBsZXZlbHNcbiAqL1xuZXhwb3J0IGVudW0gR2FtZUxldmVscyB7XG5cdEZpcnN0XG59XG4iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuLi9nYW1lT2JqZWN0cy9jaGFyYWN0ZXJzL1BsYXllcic7XG5pbXBvcnQgeyBHYW1lT2JqZWN0LCBJR2FtZU9iamVjdFNlcmlhbGl6ZWQgfSBmcm9tICcuLi9nYW1lT2JqZWN0cy9HYW1lT2JqZWN0JztcbmltcG9ydCB7IEdhbWVNYW5hZ2VyIH0gZnJvbSAnLi9HYW1lTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBTdG9yYWdlTWFuYWdlciB7XG5cblx0cHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZ2FtZU1hbmFnZXI6IEdhbWVNYW5hZ2VyKSB7IH1cblxuXHRwdWJsaWMgc2F2ZSgpIHtcblx0XHRsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZU9iamVjdHMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLmdhbWVNYW5hZ2VyLmdhbWVPYmplY3RzKSk7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xldmVsJywgdGhpcy5nYW1lTWFuYWdlci5sZXZlbC50b1N0cmluZygpKTtcblx0fVxuXG5cdHB1YmxpYyBsb2FkKCkge1xuXHRcdC8vIENsZWFyIHRoZSBnYW1lIG1hbmFnZXJcblx0XHR0aGlzLmdhbWVNYW5hZ2VyLmNsZWFyKCk7XG5cblx0XHQvLyBMb2FkIHRoZSBkYXRhXG5cdFx0Y29uc3QgcmF3TGV2ZWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGV2ZWwnKTtcblx0XHRpZiAocmF3TGV2ZWwgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgYSBzYXZlZCBmaWxlLmApO1xuXHRcdGNvbnN0IGxldmVsID0gTnVtYmVyKHJhd0xldmVsKTtcblxuXHRcdHRoaXMuZ2FtZU1hbmFnZXIubGV2ZWwgPSBsZXZlbDtcblxuXHRcdGNvbnN0IGdhbWVPYmplY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZU9iamVjdHMnKSkgYXMgSUdhbWVPYmplY3RTZXJpYWxpemVkW107XG5cdFx0aWYgKGdhbWVPYmplY3RzKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGdhbWVPYmplY3Qgb2YgZ2FtZU9iamVjdHMpIHtcblx0XHRcdFx0Y29uc3QgQ3RvciA9IEdhbWVPYmplY3QuZmFjdG9yeS5nZXQoZ2FtZU9iamVjdC50eXBlKTtcblx0XHRcdFx0aWYgKEN0b3IpIG5ldyBDdG9yKHRoaXMuZ2FtZU1hbmFnZXIsIDAsIDApLmZyb21KU09OKGdhbWVPYmplY3QpO1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGEgY29uc3RydWN0b3IgZm9yICR7Z2FtZU9iamVjdC50eXBlIHx8ICd1bmtub3duJ30uIEFib3J0aW5nLmApO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmdhbWVNYW5hZ2VyLnBsYXllciA9IHRoaXMuZ2FtZU1hbmFnZXIuZ2FtZU9iamVjdHMuZmluZCgoZ2FtZU9iamVjdCkgPT4gZ2FtZU9iamVjdCBpbnN0YW5jZW9mIFBsYXllcikgYXMgUGxheWVyO1xuXHRcdH1cblx0fVxuXG59XG4iLCJpbXBvcnQgeyBHYW1lTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL0dhbWVNYW5hZ2VyJztcbmltcG9ydCB7IEhpZGluZ1R5cGUsIFBsYXllclN0YXRlIH0gZnJvbSAnLi4vLi4vbWlzYy90eXBlcyc7XG5pbXBvcnQgeyBIaWRpbmdTcG90LCBJSGlkaW5nU3BvdFNlcmlhbGl6ZWQgfSBmcm9tICcuLi9oaWRpbmdTcG90cy9IaWRpbmdTcG90JztcbmltcG9ydCB7IENoYXJhY3RlciwgSUNoYXJhY3RlclNlcmlhbGl6ZWQgfSBmcm9tICcuL0NoYXJhY3Rlcic7XG5cbmV4cG9ydCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBDaGFyYWN0ZXIge1xuXG5cdHB1YmxpYyBoaWRpbmdTcG90OiBIaWRpbmdTcG90ID0gbnVsbDtcblx0cHVibGljIG1vbmV5ID0gMDtcblxuXHRwdWJsaWMgY29uc3RydWN0b3IoZ2FtZU1hbmFnZXI6IEdhbWVNYW5hZ2VyLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuXHRcdHN1cGVyKGdhbWVNYW5hZ2VyLCB4LCB5LCAncGxheWVyJyk7XG5cdH1cblxuXHQvKipcblx0ICogSGlkZXMgdGhlIHBsYXllciwgY2hhbmdpbmcgdGhlIHN0YXRlIGFuZCBzZXR0aW5nIHRoZSBoaWRpbmcgc3BvdFxuXHQgKiBAcGFyYW0gaGlkaW5nU3BvdCBUaGUgaGlkaW5nIHNwb3Rcblx0ICovXG5cdHB1YmxpYyBoaWRlKGhpZGluZ1Nwb3Q6IEhpZGluZ1Nwb3QpIHtcblx0XHRpZiAoaGlkaW5nU3BvdC5oaWRpbmdUeXBlICE9PSBIaWRpbmdUeXBlLm5vbmUpIHtcblx0XHRcdHRoaXMuc2V0U3RhdGUoUGxheWVyU3RhdGUuaGlkZGVuKTtcblx0XHRcdHRoaXMuaGlkaW5nU3BvdCA9IGhpZGluZ1Nwb3Q7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldmVhbHMgdGhlIHBsYXllciwgbGVhdmluZyB0aGUgaGlkaW5nIHBsYWNlIGlmIHRoZXJlIHdhcyBhbnlcblx0ICovXG5cdHB1YmxpYyByZXZlYWwoKSB7XG5cdFx0aWYgKHRoaXMuaGlkaW5nU3BvdCkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh0aGlzLmhlYWx0aCA/IFBsYXllclN0YXRlLnN0YW5kIDogUGxheWVyU3RhdGUuZGVhZCk7XG5cdFx0XHR0aGlzLmhpZGluZ1Nwb3QgPSBudWxsO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHB1YmxpYyBmcm9tSlNPTihkYXRhOiBJUGxheWVyU2VyaWFsaXplZCkge1xuXHRcdHN1cGVyLmZyb21KU09OKGRhdGEpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0cHVibGljIHRvSlNPTigpOiBJUGxheWVyU2VyaWFsaXplZCB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnN1cGVyLnRvSlNPTigpLFxuXHRcdFx0aGlkaW5nU3BvdDogdGhpcy5oaWRpbmdTcG90LnRvSlNPTigpLFxuXHRcdFx0bW9uZXk6IHRoaXMubW9uZXlcblx0XHR9O1xuXHR9XG5cbn1cblxuUGxheWVyLmZhY3RvcnkuYWRkKFBsYXllcik7XG5cbi8qKlxuICogVGhlIHNlcmlhbGl6ZWQgcGxheWVyIGRhdGFcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJUGxheWVyU2VyaWFsaXplZCBleHRlbmRzIElDaGFyYWN0ZXJTZXJpYWxpemVkIHtcblx0aGlkaW5nU3BvdDogSUhpZGluZ1Nwb3RTZXJpYWxpemVkO1xuXHRtb25leTogbnVtYmVyO1xufVxuIiwiaW1wb3J0IHsgSUludmVudG9yeVNlcmlhbGl6ZWQsIEludmVudG9yeSB9IGZyb20gJy4uLy4uL2NvbW1vbi9JbnZlbnRvcnknO1xuaW1wb3J0IHsgSXRlbSB9IGZyb20gJy4uLy4uL2l0ZW1zL0l0ZW0nO1xuaW1wb3J0IHsgSXRlbVdlYXBvbiB9IGZyb20gJy4uLy4uL2l0ZW1zL0l0ZW1XZWFwb24nO1xuaW1wb3J0IHsgR2FtZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9HYW1lTWFuYWdlcic7XG5pbXBvcnQgeyBDaGFyYWN0ZXJTdGF0ZSwgRGlyZWN0aW9uIH0gZnJvbSAnLi4vLi4vbWlzYy90eXBlcyc7XG5pbXBvcnQgeyBHYW1lT2JqZWN0LCBJR2FtZU9iamVjdFNlcmlhbGl6ZWQgfSBmcm9tICcuLi9HYW1lT2JqZWN0JztcblxuZXhwb3J0IGNsYXNzIENoYXJhY3RlciBleHRlbmRzIEdhbWVPYmplY3Qge1xuXHRwdWJsaWMgd2Fsa1NwZWVkID0gMDtcblx0cHVibGljIHJ1blNwZWVkID0gMDtcblx0cHVibGljIHN0YXRlOiBudW1iZXIgPSBDaGFyYWN0ZXJTdGF0ZS5zdGFuZDtcblx0cHVibGljIGRpcmVjdGlvbiA9IERpcmVjdGlvbi5kb3duO1xuXHRwdWJsaWMgaW52ZW50YXJ5ID0gbmV3IEludmVudG9yeSgpO1xuXHRwdWJsaWMgc3RyZW5ndGggPSAwO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihnYW1lTWFuYWdlcjogR2FtZU1hbmFnZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCBrZXk/OiBzdHJpbmcsIGZyYW1lPzogc3RyaW5nKSB7XG5cdFx0c3VwZXIoZ2FtZU1hbmFnZXIsIHgsIHksIGtleSwgZnJhbWUpO1xuXHRcdHRoaXMuZ2FtZS5waHlzaWNzLmVuYWJsZSh0aGlzKTtcblx0fVxuXG5cdHB1YmxpYyBnZXQgZGFtYWdlU3RyZW5ndGgoKSB7XG5cdFx0Y29uc3QgaXRlbSA9IHRoaXMuaW52ZW50YXJ5LmFjdGl2ZTtcblx0XHRyZXR1cm4gaXRlbSBpbnN0YW5jZW9mIEl0ZW1XZWFwb24gPyBpdGVtLmRhbWFnZSA6IHRoaXMuc3RyZW5ndGg7XG5cdH1cblxuXHRwdWJsaWMgc2V0U3RyZW5ndGgoc3RyZW5ndGg6IG51bWJlcikge1xuXHRcdHRoaXMuc3RyZW5ndGggPSBzdHJlbmd0aDtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHB1YmxpYyBzZXRTdGF0ZShzdGF0ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRyeSB0byBhdHRhY2sgYSBjaGFyYWN0ZXJcblx0ICogQHBhcmFtIGNoYXJhY3RlciBUaGUgY2hhcmFjdGVyIHRoaXMgb25lIGlzIGF0dGVtcHRpbmcgdG8gYXR0YWNrXG5cdCAqL1xuXHRwdWJsaWMgYXR0YWNrKGNoYXJhY3RlcjogQ2hhcmFjdGVyKSB7XG5cdFx0Y2hhcmFjdGVyLmRhbWFnZSh0aGlzLmRhbWFnZVN0cmVuZ3RoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBLaWxsIG92ZXJsb2FkIHRvIHNldCB0aGUgY2hhcmFjdGVyJ3Mgc3RhdGVcblx0ICovXG5cdHB1YmxpYyBraWxsKCkge1xuXHRcdHRoaXMuc2V0U3RhdGUoQ2hhcmFjdGVyU3RhdGUuZGVhZCk7XG5cdFx0cmV0dXJuIHN1cGVyLmtpbGwoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGlzIGNoYXJhY3RlciB0byB3YWxrXG5cdCAqL1xuXHRwdWJsaWMgd2FsaygpIHtcblx0XHR0aGlzLnNldFN0YXRlKENoYXJhY3RlclN0YXRlLndhbGspO1xuXHRcdHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcblx0XHRcdGNhc2UgRGlyZWN0aW9uLmRvd246IHRoaXMuc2V0VmVsb2NpdHkoMCwgdGhpcy53YWxrU3BlZWQpOyBicmVhaztcblx0XHRcdGNhc2UgRGlyZWN0aW9uLnVwOiB0aGlzLnNldFZlbG9jaXR5KDAsIC10aGlzLndhbGtTcGVlZCk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBEaXJlY3Rpb24ubGVmdDogdGhpcy5zZXRWZWxvY2l0eSgtdGhpcy53YWxrU3BlZWQsIDApOyBicmVhaztcblx0XHRcdGRlZmF1bHQ6IHRoaXMuc2V0VmVsb2NpdHkodGhpcy53YWxrU3BlZWQsIDApO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGlzIGNoYXJhY3RlciB0byBydW5cblx0ICovXG5cdHB1YmxpYyBydW4oKSB7XG5cdFx0dGhpcy5zZXRTdGF0ZShDaGFyYWN0ZXJTdGF0ZS5ydW4pO1xuXHRcdHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcblx0XHRcdGNhc2UgRGlyZWN0aW9uLmRvd246IHRoaXMuc2V0VmVsb2NpdHkoMCwgdGhpcy5ydW5TcGVlZCk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBEaXJlY3Rpb24udXA6IHRoaXMuc2V0VmVsb2NpdHkoMCwgLXRoaXMucnVuU3BlZWQpOyBicmVhaztcblx0XHRcdGNhc2UgRGlyZWN0aW9uLmxlZnQ6IHRoaXMuc2V0VmVsb2NpdHkoLXRoaXMucnVuU3BlZWQsIDApOyBicmVhaztcblx0XHRcdGRlZmF1bHQ6IHRoaXMuc2V0VmVsb2NpdHkodGhpcy5ydW5TcGVlZCwgMCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNldHMgdGhlIHN0YXRlIG9mIHRoaXMgY2hhcmFjdGVyIHRvIHN0YW5kLCBjaGFuZ2luZ1xuXHQgKi9cblx0cHVibGljIHN0YW5kKCkge1xuXHRcdHRoaXMuc2V0U3RhdGUoQ2hhcmFjdGVyU3RhdGUuc3RhbmQpO1xuXHRcdHRoaXMuc2V0VmVsb2NpdHkoMCwgMCk7XG5cdH1cblxuXHQvKipcblx0ICogQ2hhbmdlIHRoZSBkaXJlY3Rpb24gZm9yIHRoaXMgY2hhcmFjdGVyXG5cdCAqIEBwYXJhbSBkaXJlY3Rpb24gVGhlIG5ldyBkaXJlY3Rpb25cblx0ICovXG5cdHB1YmxpYyBjaGFuZ2VEaXJlY3Rpb24oZGlyZWN0aW9uOiBEaXJlY3Rpb24pIHtcblx0XHR0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcblx0fVxuXG5cdHB1YmxpYyBmcm9tSlNPTihkYXRhOiBJQ2hhcmFjdGVyU2VyaWFsaXplZCkge1xuXHRcdHN1cGVyLmZyb21KU09OKGRhdGEpO1xuXHRcdHRoaXMuZGlyZWN0aW9uID0gZGF0YS5kaXJlY3Rpb247XG5cdFx0dGhpcy5ydW5TcGVlZCA9IGRhdGEucnVuU3BlZWQ7XG5cdFx0dGhpcy53YWxrU3BlZWQgPSBkYXRhLndhbGtTcGVlZDtcblx0XHR0aGlzLmludmVudGFyeS5jbGVhcigpO1xuXHRcdHRoaXMuaW52ZW50YXJ5LmFjdGl2ZSA9IG5ldyBJdGVtKHRoaXMuZ2FtZSwgZGF0YS5pbnZlbnRhcnkuYWN0aXZlKTtcblx0XHRmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGEuaW52ZW50YXJ5Lml0ZW1zKSB0aGlzLmludmVudGFyeS5zZXQoZW50cnkubmFtZSwgbmV3IEl0ZW0odGhpcy5nYW1lLCBlbnRyeS5uYW1lKSk7XG5cdFx0dGhpcy5zZXRTdHJlbmd0aChkYXRhLnN0cmVuZ3RoKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHB1YmxpYyB0b0pTT04oKTogSUNoYXJhY3RlclNlcmlhbGl6ZWQge1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5zdXBlci50b0pTT04oKSxcblx0XHRcdGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG5cdFx0XHRpbnZlbnRhcnk6IHRoaXMuaW52ZW50YXJ5LnRvSlNPTigpLFxuXHRcdFx0cnVuU3BlZWQ6IHRoaXMucnVuU3BlZWQsXG5cdFx0XHRzdHJlbmd0aDogdGhpcy5zdHJlbmd0aCxcblx0XHRcdHdhbGtTcGVlZDogdGhpcy53YWxrU3BlZWQsXG5cdFx0fTtcblx0fVxuXG59XG5cbkNoYXJhY3Rlci5mYWN0b3J5LmFkZChDaGFyYWN0ZXIpO1xuXG4vKipcbiAqIFRoZSBzZXJpYWxpemVkIGNoYXJhY3RlciBkYXRhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNoYXJhY3RlclNlcmlhbGl6ZWQgZXh0ZW5kcyBJR2FtZU9iamVjdFNlcmlhbGl6ZWQge1xuXHRkaXJlY3Rpb246IG51bWJlcjtcblx0aW52ZW50YXJ5OiBJSW52ZW50b3J5U2VyaWFsaXplZDtcblx0cnVuU3BlZWQ6IG51bWJlcjtcblx0c3RyZW5ndGg6IG51bWJlcjtcblx0d2Fsa1NwZWVkOiBudW1iZXI7XG59XG4iLCJpbXBvcnQgeyBJSXRlbVNlcmlhbGl6ZWQsIEl0ZW0gfSBmcm9tICcuLi9pdGVtcy9JdGVtJztcblxuZXhwb3J0IGNsYXNzIEludmVudG9yeSBleHRlbmRzIE1hcDxzdHJpbmcsIEl0ZW0+IHtcblxuXHRwdWJsaWMgYWN0aXZlOiBJdGVtO1xuXG5cdC8qKlxuXHQgKiBTZXQgdGhlIGFjdGl2ZSBpdGVtIGZyb20gdGhlIGludmVudG9yeVxuXHQgKiBAcGFyYW0gaXRlbSBUaGUgbmV3IGFjdGl2ZSBpdGVtXG5cdCAqL1xuXHRwdWJsaWMgc2V0QWN0aXZlKGl0ZW06IEl0ZW0pIHtcblx0XHR0aGlzLmFjdGl2ZSA9IGl0ZW07XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRwdWJsaWMgdG9KU09OKCk6IElJbnZlbnRvcnlTZXJpYWxpemVkIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0YWN0aXZlOiB0aGlzLmFjdGl2ZS5uYW1lLFxuXHRcdFx0aXRlbXM6IFsuLi50aGlzLnZhbHVlcygpXVxuXHRcdH07XG5cdH1cblxufVxuXG4vKipcbiAqIFRoZSBzZXJpYWxpemVkIGludmVudG9yeSBkYXRhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUludmVudG9yeVNlcmlhbGl6ZWQge1xuXHRhY3RpdmU6IHN0cmluZztcblx0aXRlbXM6IElJdGVtU2VyaWFsaXplZFtdO1xufVxuIiwiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gJy4uL2NvbW1vbi9GYWN0b3J5JztcbmltcG9ydCB7IEl0ZW0gfSBmcm9tICcuL0l0ZW0nO1xuXG5leHBvcnQgY2xhc3MgSXRlbUZhY3RvcnkgZXh0ZW5kcyBGYWN0b3J5PEl0ZW0sIHR5cGVvZiBJdGVtPnsgfVxuIiwiaW1wb3J0IHsgSUl0ZW1TZXJpYWxpemVkLCBJdGVtIH0gZnJvbSAnLi9JdGVtJztcblxuZXhwb3J0IGNsYXNzIEl0ZW1XZWFwb24gZXh0ZW5kcyBJdGVtIHtcblx0cHVibGljIGRhbWFnZSA9IDA7XG5cblx0LyoqXG5cdCAqIFNldCB0aGUgZGFtYWdlIGZvciB0aGlzIHdlYXBvblxuXHQgKiBAcGFyYW0gZGFtYWdlIFRoZSBkYW1hZ2UgdGhpcyB3ZWFwb24gZGVhbHNcblx0ICovXG5cdHB1YmxpYyBzZXREYW1hZ2UoZGFtYWdlOiBudW1iZXIpIHtcblx0XHR0aGlzLmRhbWFnZSA9IGRhbWFnZTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHB1YmxpYyBsb2FkKGRhdGE6IElJdGVtV2VhcG9uU2VyaWFsaXplZCkge1xuXHRcdHJldHVybiBzdXBlci5sb2FkKGRhdGEpLnNldERhbWFnZShkYXRhLmRhbWFnZSk7XG5cdH1cblxuXHRwdWJsaWMgdG9KU09OKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5zdXBlci50b0pTT04oKSxcblx0XHRcdGRhbWFnZTogdGhpcy5kYW1hZ2Vcblx0XHR9O1xuXHR9XG5cbn1cblxuSXRlbS5mYWN0b3J5LmFkZChJdGVtV2VhcG9uKTtcblxuLyoqXG4gKiBUaGUgc2VyaWFsaXplZCBpdGVtIHdlYXBvbiBkYXRhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUl0ZW1XZWFwb25TZXJpYWxpemVkIGV4dGVuZHMgSUl0ZW1TZXJpYWxpemVkIHtcblx0ZGFtYWdlOiBudW1iZXI7XG59XG4iLCJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSAnLi4vY29tbW9uL0ZhY3RvcnknO1xuaW1wb3J0IHsgR2FtZU9iamVjdCB9IGZyb20gJy4vR2FtZU9iamVjdCc7XG5cbmV4cG9ydCBjbGFzcyBHYW1lT2JqZWN0RmFjdG9yeSBleHRlbmRzIEZhY3Rvcnk8R2FtZU9iamVjdCwgdHlwZW9mIEdhbWVPYmplY3Q+eyB9XG4iLCJleHBvcnQgY2xhc3MgUHJlbG9hZGVyU3RhdGUgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuXG5cdHByaXZhdGUgbG9hZGluZ0JhcjogUGhhc2VyLlNwcml0ZTtcblxuXHRwdWJsaWMgcHJlbG9hZCgpIHtcblx0XHR0aGlzLmxvYWRpbmdCYXIgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSgwLCAyNDAsICdwcmVsb2FkZXJfYmFyJyk7XG5cdFx0dGhpcy5sb2FkaW5nQmFyLmFuY2hvci5zZXRUbygwLCAwLjUpO1xuXHRcdHRoaXMubG9hZC5zZXRQcmVsb2FkU3ByaXRlKHRoaXMubG9hZGluZ0Jhcik7XG5cblx0XHQvLyBUT0RPOiBsb2FkIGhlcmUgdGhlIGFzc2V0cyBmb3IgdGhlIGdhbWVcblx0XHR0aGlzLmdhbWUubG9hZC5pbWFnZSgnbG9nbycsICdpbWFnZXMvU3RvbmVzQ3JlZWQucG5nJyk7XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlKCkge1xuXHRcdHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnbWVudScpO1xuXHR9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9